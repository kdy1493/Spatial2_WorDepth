# NYU Depth V2 Matched Dataset Training Configuration (Optimized v2)

# Overall
mode: train
model_name: nyu_matched_train
pretrain: ./swin_large_patch4_window12_384_22k.pth

# Dataset
dataset: nyu_matched
data_path: /home/dongyub/WorDepth/matched_dataset/nyu-depth-v2-matched/
gt_path: /home/dongyub/WorDepth/matched_dataset/nyu-depth-v2-matched/
filenames_file: ./data_splits/nyu_matched_train_files_with_gt.txt
input_height: 480
input_width: 640
max_depth: 10               # NYU-matched: 0-10m range (scaled by /6553.5)

# Training (Optimized)
batch_size: 8               # ↑ from 4
num_epochs: 30              # ↓ from 40 (시간 단축)
learning_rate: 3.0e-5
end_learning_rate: 1.0e-5
weight_decay: 0.0
adam_eps: 1.0e-3
num_threads: 8              # ✅ 데이터 로딩 병목 완화
gpu_devices: "6"

# Preprocessing
do_random_rotate: true
degree: 2.5

# Log and save
log_directory: ./models/
log_freq: 100
store_freq: 2500            # eval_freq와 동일하게 (metric과 checkpoint 동기화)

# Online evaluation
do_online_eval: true
eval_freq: 2500             # ✅ 약 4.4 epoch마다 평가 (오버헤드 줄임)
data_path_eval: /home/dongyub/WorDepth/matched_dataset/nyu-depth-v2-matched/
gt_path_eval: /home/dongyub/WorDepth/matched_dataset/nyu-depth-v2-matched/
filenames_file_eval: ./data_splits/nyu_matched_test_files_with_gt.txt
min_depth_eval: 1.0e-3
max_depth_eval: 10       # NYU-matched: 0-10m range (scaled by /6553.5)
eigen_crop: true

# WorDepth
weight_kld: 1.0e-3
alter_prob: 0.5
